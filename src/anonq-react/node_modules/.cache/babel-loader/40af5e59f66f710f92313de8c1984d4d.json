{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tijme\\\\Documents\\\\Semester 3\\\\anonq-react\\\\src\\\\components\\\\QuestionForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Row, Col, Button, Form } from 'react-bootstrap';\nimport '../styling/QuestionForm.css';\nimport QuestionService from \"../services/QuestionService\";\nimport { useHistory } from 'react-router-dom';\nimport Cookies from 'js-cookie';\n\nfunction QuestionForm() {\n  /*Save history of Router */\n  const history = useHistory();\n  const [questioncookies, setQuestioncookies] = useState([Cookies.get().QuestionID]);\n  /* Checkbox setstate */\n\n  const [commentEnable, setCommentEnable] = useState(false);\n  useEffect(() => {\n    setFullQuestion(prevState => ({ ...prevState,\n      question: { ...prevState.question,\n        commentsenabled: commentEnable\n      }\n    }));\n  }, [commentEnable]);\n  /* Question setState */\n\n  const [fullQuestion, setFullQuestion] = useState({\n    question: {\n      title: '',\n      description: '',\n      tag: '',\n      commentsenabled: ''\n    },\n    poll: [{\n      poll: ''\n    }],\n    expiretime: ''\n  });\n\n  const handleChange = event => {\n    const eventname = event.target.name;\n    const eventvalue = event.target.value;\n    setFullQuestion(prevState => ({ ...prevState,\n      question: { ...prevState.question,\n        [eventname]: eventvalue\n      }\n    }));\n  };\n\n  const handleChangeDeletionTime = event => {\n    const eventname = event.target.name;\n    const eventvalue = Number.parseInt(event.target.value, 10);\n    setFullQuestion(prevState => ({ ...prevState,\n      [eventname]: eventvalue\n    }));\n  };\n  /* Poll setstate */\n\n\n  const [poll, setPoll] = useState([]);\n\n  const addPoll = () => {\n    setPoll([...poll, {\n      poll: ''\n    }]); // setFullQuestion((oldArray) => ({...oldArray, poll: [{poll:''}] }));\n  };\n\n  const handlePollChange = e => {\n    const updatedPolls = [...poll];\n    updatedPolls[e.target.dataset.idx][\"poll\"] = e.target.value;\n    setPoll(updatedPolls);\n  };\n  /* Post Question + Poll */\n\n\n  const handleSubmit = async e => {\n    setFullQuestion(prevState => ({ ...prevState,\n      poll: poll\n    }));\n    e.preventDefault();\n  };\n\n  useEffect(() => {\n    async function PostQuestion() {\n      await QuestionService.PostQuestion(fullQuestion).then(res => {\n        console.log(res);\n        console.log(res.data);\n        setQuestioncookies([...questioncookies, res.data.id]);\n        Cookies.set('QuestionID', questioncookies, {\n          expires: new Date(res.data.deletionTime)\n        });\n      });\n      let path = `/`;\n      history.push(path);\n    }\n\n    PostQuestion(); //Because I use fullQuestion to set the state outside the useEffect()\n    // eslint-disable-next-line \n  }, [fullQuestion.poll]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"FormStyling\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rounded container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }, \"Post A Question\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 45\n    }\n  }, \"Title\")), /*#__PURE__*/React.createElement(Form.Control, {\n    placeholder: \"Enter Title\",\n    name: \"title\",\n    value: fullQuestion.question.title,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"exampleForm.ControlTextarea1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 45\n    }\n  }, \"Description\")), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    placeholder: \"Enter Description\",\n    name: \"description\",\n    value: fullQuestion.question.description,\n    onChange: handleChange,\n    as: \"textarea\",\n    rows: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 41\n    }\n  }, \"Tag\")), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    as: \"select\",\n    name: \"tag\",\n    value: fullQuestion.question.tag,\n    defaultValue: \"help\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    label: \"Select Tag\",\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 33\n    }\n  }, \"Personal\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 33\n    }\n  }, \"Relationship\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 33\n    }\n  }, \"Abuse\")))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 41\n    }\n  }, \"Deleted in\")), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    as: \"select\",\n    name: \"expiretime\",\n    value: fullQuestion.expiretime,\n    onChange: handleChangeDeletionTime,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    label: \"Select hours\",\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 33\n    }\n  }, \"3\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, \"6\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 33\n    }\n  }, \"12\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 33\n    }\n  }, \"24\")))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    key: \"checkbox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 41\n    }\n  }, \"Comments\")), /*#__PURE__*/React.createElement(Form.Check, {\n    type: \"checkbox\",\n    id: \"EnableComments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Check.Input, {\n    type: \"checkbox\",\n    value: commentEnable,\n    onChange: () => setCommentEnable(!commentEnable),\n    isValid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 33\n    }\n  }), \"Enable\"))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: addPoll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, \"Create new poll\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 29\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 36\n    }\n  }), poll.map((val, idx) => {\n    return /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      key: `poll-${idx}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 49\n      }\n    }, `Poll #${idx + 1}`), /*#__PURE__*/React.createElement(Form.Control, {\n      required: true,\n      type: \"text\",\n      \"data-idx\": idx,\n      className: \"poll\",\n      value: poll[idx].poll,\n      onChange: handlePollChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 49\n      }\n    })));\n  }))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 29\n    }\n  }, \"Post\"))))));\n}\n\nexport default QuestionForm;","map":{"version":3,"sources":["C:/Users/tijme/Documents/Semester 3/anonq-react/src/components/QuestionForm.js"],"names":["React","useState","useEffect","Row","Col","Button","Form","QuestionService","useHistory","Cookies","QuestionForm","history","questioncookies","setQuestioncookies","get","QuestionID","commentEnable","setCommentEnable","setFullQuestion","prevState","question","commentsenabled","fullQuestion","title","description","tag","poll","expiretime","handleChange","event","eventname","target","name","eventvalue","value","handleChangeDeletionTime","Number","parseInt","setPoll","addPoll","handlePollChange","e","updatedPolls","dataset","idx","handleSubmit","preventDefault","PostQuestion","then","res","console","log","data","id","set","expires","Date","deletionTime","path","push","map","val"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Row, Col, Button, Form } from 'react-bootstrap';\r\nimport '../styling/QuestionForm.css';\r\nimport QuestionService from \"../services/QuestionService\"\r\nimport { useHistory } from 'react-router-dom';\r\nimport Cookies from 'js-cookie'\r\n   \r\n\r\n\r\n\r\nfunction QuestionForm() {\r\n    /*Save history of Router */\r\n    const history = useHistory()\r\n    const [questioncookies, setQuestioncookies] = useState([Cookies.get().QuestionID])\r\n\r\n    \r\n    /* Checkbox setstate */\r\n    const [commentEnable, setCommentEnable] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setFullQuestion((prevState) => ({ ...prevState, question: { ...prevState.question, commentsenabled: commentEnable } }));\r\n    }, [commentEnable]);\r\n    /* Question setState */\r\n    const [fullQuestion, setFullQuestion] = useState(\r\n        {\r\n            question: { title: '', description: '', tag: '', commentsenabled: '' },\r\n            poll: [{ poll: '' }],\r\n            expiretime: ''\r\n  \r\n        }\r\n    );\r\n    const handleChange = (event) => {\r\n        const eventname = event.target.name\r\n        const eventvalue = event.target.value\r\n        setFullQuestion((prevState) => ({ ...prevState, question: { ...prevState.question, [eventname]: eventvalue } }));\r\n    };\r\n    const handleChangeDeletionTime = (event) => {\r\n        const eventname = event.target.name\r\n        const eventvalue = Number.parseInt(event.target.value, 10)\r\n        setFullQuestion((prevState) => ({ ...prevState, [eventname]: eventvalue } ));\r\n    };\r\n\r\n    /* Poll setstate */\r\n    const [poll, setPoll] = useState([]);\r\n\r\n    const addPoll = () => {\r\n        setPoll([...poll, { poll: '' }]);\r\n         // setFullQuestion((oldArray) => ({...oldArray, poll: [{poll:''}] }));\r\n    };\r\n    const handlePollChange = (e) => {\r\n        const updatedPolls = [...poll];\r\n        updatedPolls[e.target.dataset.idx][\"poll\"] = e.target.value;\r\n        setPoll(updatedPolls);\r\n    };\r\n\r\n\r\n    /* Post Question + Poll */\r\n    const handleSubmit = async (e) => {\r\n        setFullQuestion((prevState) => ({ ...prevState, poll: poll }));\r\n        e.preventDefault()\r\n    };\r\n    useEffect(() => {\r\n        async function PostQuestion(){\r\n            await QuestionService.PostQuestion(fullQuestion).then((res) => {\r\n            console.log(res);\r\n            console.log(res.data);\r\n            setQuestioncookies([...questioncookies, res.data.id])\r\n            Cookies.set('QuestionID', questioncookies, { expires:  new Date(res.data.deletionTime) })\r\n        })\r\n        let path = `/`; \r\n        history.push(path);\r\n    }\r\n    PostQuestion();\r\n    //Because I use fullQuestion to set the state outside the useEffect()\r\n     // eslint-disable-next-line \r\n    }, [fullQuestion.poll]);\r\n    \r\n\r\n\r\n    return (\r\n        <div className=\"FormStyling\">\r\n            <div className=\"rounded container\">\r\n                <Form onSubmit={handleSubmit} >\r\n                    <Row className=\"justify-content-md-center\">\r\n                        <Col md=\"8\">\r\n                            <h2>Post A Question</h2>\r\n                            <br />\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"justify-content-md-center\">\r\n                        <Col md=\"8\">\r\n                            <Form.Group controlId=\"title\">\r\n                                <Form.Label><h4>Title</h4></Form.Label>\r\n                                <Form.Control placeholder=\"Enter Title\" name=\"title\" value={fullQuestion.question.title} onChange={handleChange} required />\r\n                            </Form.Group>\r\n                            \r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"justify-content-md-center\">\r\n                        <Col md=\"8\">\r\n                            <Form.Group controlId=\"exampleForm.ControlTextarea1\">\r\n                                <Form.Label><h4>Description</h4></Form.Label>\r\n                                <Form.Control required placeholder=\"Enter Description\" name=\"description\" value={fullQuestion.question.description} onChange={handleChange} as=\"textarea\" rows=\"3\" />\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"justify-content-md-center\">\r\n                        <Col md=\"8\">\r\n                            <Form.Label><h4>Tag</h4></Form.Label>\r\n                            <Form.Control required as=\"select\" name=\"tag\" value={fullQuestion.question.tag} defaultValue=\"help\" onChange={handleChange}>\r\n                                <option label=\"Select Tag\" hidden ></option>\r\n                                <option>Personal</option>\r\n                                <option>Relationship</option>\r\n                                <option>Abuse</option>\r\n                            </Form.Control>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"justify-content-md-center\">\r\n                        <Col md=\"8\">\r\n                            <br />\r\n                            <Form.Label><h4>Deleted in</h4></Form.Label>\r\n                            <Form.Control required as=\"select\" name=\"expiretime\" value={fullQuestion.expiretime} onChange={handleChangeDeletionTime}>\r\n                                <option label=\"Select hours\" hidden ></option>\r\n                                <option>3</option>\r\n                                <option>6</option>\r\n                                <option>12</option>\r\n                                <option>24</option>\r\n                            </Form.Control>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"justify-content-md-center\" key=\"checkbox\">\r\n                        <Col md=\"8\">\r\n                            <br />\r\n                            <Form.Label><h4>Comments</h4></Form.Label>\r\n                            <Form.Check type=\"checkbox\" id=\"EnableComments\">\r\n                                <Form.Check.Input type=\"checkbox\" value={commentEnable} onChange={() => setCommentEnable(!commentEnable)} isValid />\r\n                                 Enable\r\n                            </Form.Check>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"justify-content-md-center\">\r\n                        <Col md=\"8\">\r\n                            <br />\r\n                            <Button variant=\"primary\" onClick={addPoll}>\r\n                                Create new poll\r\n                            </Button>\r\n                            <br /> <br />\r\n                            {\r\n                                poll.map((val, idx) => {\r\n                                    return (\r\n                                        <Form.Group>\r\n                                            <div key={`poll-${idx}`}>\r\n                                                <Form.Label>{`Poll #${idx + 1}`}</Form.Label>\r\n                                                <Form.Control\r\n                                                    required\r\n                                                    type=\"text\"\r\n                                                    data-idx={idx}\r\n                                                    className=\"poll\"\r\n                                                    value={poll[idx].poll}\r\n                                                    onChange={handlePollChange}\r\n                                                />\r\n                                            </div>\r\n                                        </Form.Group>\r\n                                    );\r\n                                })\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className=\"justify-content-md-center\">\r\n                        <Col md=\"8\">\r\n                            <Button variant=\"primary\" type=\"submit\">\r\n                                Post\r\n                     </Button>\r\n                        </Col>\r\n                    </Row>\r\n                </Form >\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default QuestionForm;"]},"metadata":{},"sourceType":"module"}